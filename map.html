<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>Naver Map Diagnostic</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #f0f0f0; }
        #map { width: 100%; height: 100%; }
        
        .debug-info {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border: 2px solid #ff4444;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            color: #333;
            max-width: 90%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .debug-item { margin-bottom: 5px; }
        .debug-label { font-weight: bold; color: #d32f2f; }
    </style>
</head>
<body>

<!-- ì§„ë‹¨ ì •ë³´ í‘œì‹œì°½ (ì§€ë„ê°€ ì•ˆ ë‚˜ì˜¬ ë•Œ ì›ì¸ ë¶„ì„ìš©) -->
<div id="debugBoard" class="debug-info">
    <h3 style="margin:0 0 10px 0;">ğŸ” ì¸ì¦ ì‹¤íŒ¨ ì›ì¸ ë¶„ì„</h3>
    <div class="debug-item">
        <span class="debug-label">í˜„ì¬ ì ‘ì† ë„ë©”ì¸:</span><br>
        <span id="currentDomain">...</span>
    </div>
    <div class="debug-item">
        <span class="debug-label">ì…ë ¥ëœ Client ID:</span><br>
        <span id="currentClientId">...</span>
    </div>
    <div class="debug-item">
        <span class="debug-label">ë“±ë¡í•´ì•¼ í•  URL:</span><br>
        <span id="suggestUrl" style="background:#eee; padding:2px;">...</span>
    </div>
    <div style="margin-top:10px; font-size:11px; color:#666;">
        ìœ„ 'ë“±ë¡í•´ì•¼ í•  URL'ê³¼ ë„¤ì´ë²„ ì½˜ì†”ì— ë“±ë¡ëœ URLì´<br>
        <b style="color:red">ê¸€ì í•˜ë‚˜ë¼ë„ ë‹¤ë¥´ë©´</b> ì‹¤íŒ¨í•©ë‹ˆë‹¤.
    </div>
    <button onclick="document.getElementById('debugBoard').style.display='none'" style="margin-top:10px; padding:5px 10px; cursor:pointer;">ì°½ ë‹«ê¸°</button>
</div>

<div id="map"></div>

<script>
    // 1. URL íŒŒë¼ë¯¸í„° ì½ê¸°
    const urlParams = new URLSearchParams(window.location.search);
    const lat = parseFloat(urlParams.get('lat'));
    const lng = parseFloat(urlParams.get('lng'));
    const clientId = urlParams.get('clientId');

    // 2. ì§„ë‹¨ ì •ë³´ ì¶œë ¥
    const currentDomain = window.location.protocol + "//" + window.location.hostname;
    
    document.getElementById('currentDomain').textContent = currentDomain;
    document.getElementById('currentClientId').textContent = clientId ? clientId : "(ì—†ìŒ)";
    document.getElementById('suggestUrl').textContent = currentDomain;

    // Client IDê°€ ì—†ìœ¼ë©´ ê²½ê³ 
    if (!clientId) {
        alert("Client IDê°€ ì—†ìŠµë‹ˆë‹¤. URL ë’¤ì— ?clientId=... ë¥¼ ë¶™ì—¬ì£¼ì„¸ìš”.");
    } 
    else {
        // 3. ë„¤ì´ë²„ ì§€ë„ ë¡œë“œ ì‹œë„
        const script = document.createElement('script');
        script.src = `https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${clientId}`;
        script.async = true;
        
        script.onload = () => {
            // ì„±ê³µí•˜ë©´ ì§„ë‹¨ì°½ ìˆ¨ê¹€ (ì„ íƒì‚¬í•­)
            // document.getElementById('debugBoard').style.display = 'none';
            
            try {
                if(isNaN(lat) || isNaN(lng)) return;
                var position = new naver.maps.LatLng(lat, lng);
                var map = new naver.maps.Map('map', {
                    center: position,
                    zoom: 16
                });
                new naver.maps.Marker({ position: position, map: map });
            } catch (e) {
                console.error(e);
            }
        };

        script.onerror = () => {
            alert("âš ï¸ ì¸ì¦ ì‹¤íŒ¨!\n\ní™”ë©´ì— í‘œì‹œëœ 'í˜„ì¬ ì ‘ì† ë„ë©”ì¸'ì´\në„¤ì´ë²„ ì½˜ì†” 'Web ì„œë¹„ìŠ¤ URL'ì— ë˜‘ê°™ì´ ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.");
        };

        document.head.appendChild(script);
    }
</script>
</body>
</html>